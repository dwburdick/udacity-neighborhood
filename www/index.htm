<!DOCTYPE html>
<html>
<head>

	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="js/knockout-3.3.0.js"></script>
	<script src="js/infowindow-view.js"></script>
	<title>Belmar</title>
</head>
<body>

	<div id="map"></div>
	<script type="text/javascript">

	var map;
	function initMap() {
	  map = new google.maps.Map(document.getElementById('map'), {
	    center: {lat: 39.706901, lng: -105.084055},
	    zoom: 15
	  });

	  	for (i in markers) {
	  		var infoTitle = markers[i].title;
	  		var url = markers[i].url;
	  		var blurb = markers[i].blurb;
	  		var address = markers[i].address;
	  		var infoLat = markers[i].lat;
	  		var infoLng = markers[i].lng;

	  		var contentString = '<div class="infoWindow">'+
	  			'<h1><a href="' + url + '">' + infoTitle + '</a></h1>' +
	  			'<div class="infoWindowContent"><p>' + blurb + '</p></div>' +
	  			'<p class="infoAddress">' + address + '</p></div>';

	  		var infowindow = new google.maps.InfoWindow({
	  			content: contentString
	  		});

	  		var marker = new google.maps.Marker({
	  			position: {lat: infoLat, lng: infoLng},
	  			map: map,
	  			title: infoTitle,
	  		});

	  		// wrap event listener in IIFE

	  		(function(markerCopy, infoWindowCopy){
		  		marker.addListener('click', function(){
					infoWindowCopy.open(map, markerCopy);
				});
			})(marker, infowindow);
	  	};
	};


    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-dxArQFJ52v-62lleBgjBa3JxjUYuwM0&callback=initMap">
    </script>

</body>
</html>